@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Retro Ghibli Palette */
    --background-hex: #e0f7fa; /* Light Cyan */
    --foreground-hex: #37474f; /* Blue Grey */
    --card-hex: #ffffff;
    --card-foreground-hex: #37474f;
    --popover-hex: #ffffff;
    --popover-foreground-hex: #37474f;
    --primary-hex: #ff8a65; /* Light Orange/Coral */
    --primary-foreground-hex: #ffffff;
    --secondary-hex: #fff9c4; /* Pale Yellow */
    --secondary-foreground-hex: #37474f;
    --muted-hex: #cfd8dc; /* Lighter Blue Grey */
    --muted-foreground-hex: #546e7a; /* Darker Blue Grey */
    --accent-hex: #ffd600; /* Vivid Yellow */
    --accent-foreground-hex: #37474f;
    --destructive-hex: #e57373; /* Soft Red */
    --destructive-foreground-hex: #ffffff;
    --border-hex: #90a4ae; /* Blue Grey Light */
    --input-hex: #b0bec5;
    --ring-hex: #ff8a65;
    --pass-hex: #81c784; /* Soft Green */
    --fail-hex: #e57373; /* Soft Red */
    --coin-hex: #ffd600; /* Vivid Yellow */

    --background: 200 60% 95%; /* #e0f7fa */
    --foreground: 200 15% 29%; /* #37474f */
    --card: 0 0% 100%;
    --card-foreground: 200 15% 29%;
    --popover: 0 0% 100%;
    --popover-foreground: 200 15% 29%;
    --primary: 16 100% 70%; /* #ff8a65 */
    --primary-foreground: 0 0% 100%;
    --secondary: 56 100% 88%; /* #fff9c4 */
    --secondary-foreground: 200 15% 29%;
    --muted: 200 14% 84%; /* #cfd8dc */
    --muted-foreground: 200 15% 41%; /* #546e7a */
    --accent: 50 100% 50%; /* #ffd600 */
    --accent-foreground: 200 15% 29%;
    --destructive: 0 70% 74%; /* #e57373 */
    --destructive-foreground: 0 0% 100%;
    --border: 200 13% 62%; /* #90a4ae */
    --input: 200 13% 70%; /* #b0bec5 */
    --ring: 16 100% 70%;
    --radius: 0.5rem;

    --pass: 125 45% 64%; /* #81c784 */
    --fail: 0 70% 74%; /* #e57373 */
    --coin: 50 100% 50%; /* #ffd600 */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    background-image: url("/ghibli-background.png");
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    image-rendering: pixelated;
    font-family: var(--font-press-start-2p), system-ui, sans-serif;
    position: relative;
  }
  body::before {
    content: "";
    position: absolute;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.15);
    backdrop-filter: blur(2px);
    z-index: 0;
  }

  .pixel-border {
    @apply border-4 border-double border-border;
    box-shadow: 0 0 0 2px var(--card-hex); /* Use card color for clean edge */
  }
}

@layer components {
  .eye-container {
    @apply relative w-48 h-24 flex justify-center items-center gap-6;
  }
  .eye {
    @apply relative w-12 h-12 rounded-full; /* Round eyes */
    background-color: #ffffff;
    border: 4px solid hsl(var(--foreground));
    transition: all 0.3s ease-in-out;
    image-rendering: pixelated;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }
  /* Add a cute glint */
  .eye::after {
    content: "";
    @apply absolute w-3 h-3 rounded-full bg-white;
    top: 4px;
    left: 4px;
  }

  .eye-win {
    @apply h-10; /* Squinty happy eyes, but still roundish */
    border-radius: 50% / 60%;
    background-color: hsl(var(--pass));
  }
  .eye-lose {
    @apply h-14 w-10; /* Sad, tall eyes */
    background-color: hsl(var(--fail));
  }
  .mouth {
    @apply absolute w-16 h-8 bg-primary opacity-0 transition-opacity duration-300;
    bottom: -10px;
    /* Create a smile shape using a mask */
    -webkit-mask-image: radial-gradient(circle at 50% 0, transparent 24px, black 25px);
    mask-image: radial-gradient(circle at 50% 0, transparent 24px, black 25px);
  }
  .mouth-win {
    @apply opacity-100;
  }

  .dialogue-box {
    @apply relative w-full min-h-[8rem] mb-6 p-4 border-4 border-primary bg-background text-foreground text-lg leading-relaxed font-normal flex items-center justify-center text-center;
    box-shadow: 0 0 0 4px var(--background-hex);
  }

  .dialogue-caret {
    @apply absolute w-0 h-0 border-8 border-transparent border-t-primary;
    bottom: -20px;
    left: 50%;
    transform: translateX(-50%);
  }
}
